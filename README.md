# ZapScan

PowerShell скрипт для автоматизации сканирования веб-приложений с помощью OWASP ZAP.

## Описание

Скрипт `Start-ZapScan.ps1` автоматизирует процесс сканирования веб-приложений с использованием OWASP ZAP в режиме демона (без GUI). Он выполняет следующие действия:

1. Запускает ZAP в фоновом режиме
2. Выполняет Spider сканирование для обнаружения URL-адресов
3. Проводит Active сканирование для поиска уязвимостей
4. Генерирует отчет в HTML формате
5. Корректно завершает работу ZAP

## Требования

- Windows 10 или выше
- PowerShell 5.1 или выше
- Java 21 (Eclipse Adoptium)
- OWASP ZAP 2.16.1

## Установка

1. Установите Java 21 (Eclipse Adoptium)
2. Установите OWASP ZAP 2.16.1
3. Склонируйте репозиторий:
```powershell
git clone https://github.com/Alexey223/ZapScan.git
```

## Использование

Запустите скрипт с параметрами:

```powershell
.\Start-ZapScan.ps1
```

По умолчанию скрипт:
- Использует ZAP на порту 8080
- Сканирует тестовый сайт http://testphp.vulnweb.com/
- Генерирует отчет в формате HTML в директории C:\temp\ZAP Scan\

### Сканирование нескольких сайтов

Скрипт поддерживает сканирование нескольких сайтов в одном запуске. Для этого используйте параметр `-TargetUrls` с массивом URL-адресов:

```powershell
Invoke-ZapScan `
    -PathToZap "C:\Program Files\ZAP\Zed Attack Proxy\zap.bat" `
    -ZapApiUrl "http://localhost:8080" `
    -ZapApiKey "YOUR_API_KEY" `
    -TargetUrls @("https://site1.com/", "https://site2.com/") `
    -ReportPath "C:\temp\ZAP Scan\multi_site_scan_report.html" `
    -ReportFormat "html"
```

При сканировании нескольких сайтов:
- Каждый сайт сканируется последовательно
- Если сканирование одного сайта завершается с ошибкой, скрипт продолжает работу со следующим
- Генерируется единый отчет, содержащий результаты сканирования всех сайтов

## Последние изменения

- Добавлена поддержка сканирования нескольких сайтов в одном запуске
- Исправлен параметр генерации отчета (заменен `formMethod` на `format`)
- Добавлена поддержка Java 21
- Улучшена обработка ошибок при генерации отчета
- Добавлено подробное логирование процесса сканирования

## Структура проекта

- `Start-ZapScan.ps1` - основной скрипт
- `README.md` - документация
- `.gitignore` - файл для исключения из Git

## Лицензия

MIT License 